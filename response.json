{"targetEngine":{"version":118296,"tags":["default","test"],"state":"INIT","release":"2.2.3","platform":{"r":{"system":{"version_info":{"year":"2017","version.string":"R version 3.4.3 (2017-11-30)","system":"x86_64, linux-gnu","svn rev":"73796","status":"","platform":"x86_64-pc-linux-gnu","os":"linux-gnu","nickname":"Kite-Eating Tree","month":"11","minor":"4.3","major":"3","language":"R","day":"30","arch":"x86_64"},"version":"R version 3.4.3 (2017-11-30)","system":"unix","processor":{"arch":"x86_64"},"platform":"unix","num_processors":4,"executable":"/usr/bin/R","double_info":["0.0000000000000002220446","0.0000000000000001110223","2.225074e-308","1.797693e+308","2","53","5","0","-52","-53","11","-1022","1024","2147483647","8","8","16","8"],"architecture":64},"libraries":{"RevoMods":"11.0.0","lattice":"0.20-35","mrsdeploy":"1.1.3","RUnit":"0.4.26","Matrix":"1.2-12","methods":"3.4.3","cluster":"2.0.6","tcltk":"3.4.3","png":"0.1-7","fastscore.io":"1.0","base":"3.4.3","iterators":"1.0.9","CompatibilityAPI":"1.1.0","MASS":"7.3-47","nnet":"7.3-12","grDevices":"3.4.3","utils":"3.4.3","RevoIOQ":"8.0.9","deployrRserve":"9.0.0","R6":"2.2.2","codetools":"0.2-15","splines":"3.4.3","class":"7.3-14","boot":"1.3-20","jsonlite":"1.5","spatial":"7.3-11","RevoPemaR":"10.0.0","RevoScaleR":"9.3.0","foreign":"0.8-69","RevoTreeView":"10.0.0","fastscore.runner":"1.6","compiler":"3.4.3","nlme":"3.1-131","RevoUtils":"10.0.7","curl":"3.1","survival":"2.41-3","datasets":"3.4.3","foreach":"1.4.5","MicrosoftR":"3.4.3.0097","mgcv":"1.8-22","grid":"3.4.3","KernSmooth":"2.23-15","doRSR":"10.0.0","doParallel":"1.0.12","RevoUtilsMath":"10.0.1","stats":"3.4.3","stats4":"3.4.3","graphics":"3.4.3","rpart":"4.1-11","parallel":"3.4.3","RevoTDUtils":"1.0","tools":"3.4.3","mrupdate":"1.0.1","checkpoint":"0.4.3","fastscore":"1.6"}},"python":{"system":{"version_info":[3,6,8,"final",0],"version":"3.6.8 (default, Dec  5 2019, 15:45:45) \n[GCC 8.3.1 20191121 (Red Hat 8.3.1-5)]","system":"Linux","processor":"x86_64","platform":"linux","num_processors":4,"float_info":[1.7976931348623157e+308,1024,308,2.2250738585072014e-308,-1021,-307,15,53,2.220446049250313e-16,2,1],"executable":"/usr/bin/python3","architecture":["64bit",""],"api_version":1013},"libraries":{"iso8601":"0.1.14","PyNaCl":"1.4.0","shap":"0.35.0","gpg":"1.10.0","requests":"2.24.0","subscription-manager":"1.26.17","SQLAlchemy":"1.3.13","pip":"20.1.1","ethtool":"0.14","tabulate":"0.8.8","scipy":"1.2.0","pymssql":"2.1.4","setuptools":"39.2.0","numpy":"1.19.0","cffi":"1.14.5","pytz":"2020.1","PyYAML":"5.4.1","pyinotify":"0.9.6","dbus-python":"1.2.4","python-dateutil":"2.6.1","chardet":"3.0.4","scikit-learn":"0.18.1","jdcal":"1.4.1","quickavro":"0.1.22","ordered-set":"4.0.2","pycparser":"2.20","bert":"2.2.0","pysftp":"0.2.9","websocket-client":"0.57.0","urllib3":"1.25.9","basho-erlastic":"2.1.1","python-dmidecode":"3.12.2","six":"1.11.0","xlrd":"2.0.1","pandas":"0.23.3","openpyxl":"2.4.0","bcrypt":"3.2.0","cryptography":"3.4.6","iniparse":"0.4","pygobject":"3.28.3","decorator":"4.2.1","idna":"2.10","et-xmlfile":"1.0.1","tqdm":"4.57.0","certifi":"2020.6.20","syspurpose":"1.26.17","rpm":"4.14.2","msgpack":"1.0.0","paramiko":"2.7.2","fastscore":"1.10.2"}}},"outputEndpoints":[],"name":"engine-optimizer-prod","manifoldInfo":{"streams":[],"state":"init","jets":[],"initialTags":[],"group":"modelop"},"lastModifiedDate":"2021-03-11T02:54:49.168Z","lastModifiedBy":"SYSTEM","inputEndpoints":[],"id":"62bbaa91-6f68-5fcb-830b-8a799b34dd99","group":"modelop","engineType":"MODEL_OP_ENGINE","createdDate":"2021-03-02T16:41:19.025Z","createdBy":"SYSTEM"},"outputData":[{"repositoryInfo":{"secure":false,"repositoryType":"S3_REPOSITORY","region":"default-region","port":9020,"host":"ecs.qbeai.com"},"name":"b4cb7bfd-65e3-4ee7-8294-536088fd3733/bea03f2e-0fdf-400e-927b-81a3e997aa05.json","filename":"temp_model_output.json","fileUrl":"http://ecs.qbeai.com:9020/moc-app-prod/b4cb7bfd-65e3-4ee7-8294-536088fd3733/bea03f2e-0fdf-400e-927b-81a3e997aa05.json","fileSize":0,"fileFormat":"JSON","assetType":"EXTERNAL_FILE","assetRole":"TEST_DATA","assetId":"bea03f2e-0fdf-400e-927b-81a3e997aa05"}],"model":{"version":1,"targetRuntimes":[],"storedModel":{"version":0,"modelMetaData":{"type":"PYTHON","tags":[],"repositoryInfo":{"repositoryType":"GIT_REPO","repositoryRemote":"https://bitbucket.corp.qbe.com/scm/naoda/cd_optimizer_model.git","repositoryDirectory":"/tmp/model-manage-repos/master/b4cb7bfd-65e3-4ee7-8294-536088fd3733","repositoryBranch":"master","lastCommitId":"295ad4e3bf5d7bcc27be077a12dca1fc2a2a9c08","classicRepository":false},"outputSchema":[],"name":"cd_optimizer_model","inputSchema":[],"enableOutputSchemaChecking":false,"enableInputSchemaChecking":false,"description":"Imported from a GIT repository","custom":{},"classicModel":false,"attachments":[]},"modelAssets":[{"sourceCodeType":"MODEL","sourceCodeFilePath":"cd_optimizer.py","sourceCode":"# fastscore.schema.0: input_sch\n# fastscore.schema.1: output_sch\n\n\nimport pandas as pd\nimport numpy as np\nimport gzip, pickle\nimport sklearn as sk\nfrom sklearn.preprocessing import Imputer\nfrom sklearn.ensemble import GradientBoostingClassifier\nimport shap\nimport math\n\n# modelop.init\ndef begin():\n    global col_codes, model, features, features1_dict, features2_dict, features3_dict\n\n    df_rule_set = pd.read_csv(\"col_names_Oct23.csv\", encoding=\"iso-8859-1\")\n    col_codes = df_rule_set[\"ColName\"]\n\n    f = gzip.open(\"model_Oct23.pklz\", \"r\")\n    model = pickle.load(f)\n    f.close()\n\n    features = pickle.load(gzip.open(\"vec_Oct23.pklz\", \"r\"))\n\n    features1_dict = pickle.load(open(\"feature_cat_trans_missing.pickle\", \"rb\"))\n    features2_dict = pickle.load(open(\"feature_cat_trans_exist.pickle\", \"rb\"))\n    features3_dict = pickle.load(open(\"feature_num.pickle\", \"rb\"))\n\n\n# modelop.score\ndef action(x):\n    df = pd.DataFrame([x])\n    var = col_codes\n    objs = df[var].astype(object)\n\n    y = model.predict_proba(objs)[:, 1]\n\n    threshold = 0.7\n    z = np.where(y > threshold, 1, 0)\n\n    df[var] = df[var].astype(float)\n    cols = [\"ClaimNumber\"]\n    referral_df = df[cols].copy()\n    link = \"identity\"\n    _, referral_df_reasoncode = get_shap_reasons(\n        model,\n        df,\n        referral_df,\n        link,\n        features,\n        features1_dict,\n        features2_dict,\n        features3_dict,\n    )\n    r1 = referral_df_reasoncode.iloc[:, -3]\n    r2 = referral_df_reasoncode.iloc[:, -2]\n    r3 = referral_df_reasoncode.iloc[:, -1]\n\n    out = {\n        \"ClaimNumber\": x[\"ClaimNumber\"],\n        \"LOB\": x[\"LOB\"],\n        \"OfficeCode\": x[\"OfficeCode\"],\n        \"OptimizerScore\": y[0],\n        \"ISODirectorScore\": x[\"Score\"],\n        \"InvolvedPartyScore\": x[\"IndPartyScore\"],\n        \"ISODirectorScoringDate\": x[\"ISOScoreDate\"],\n        \"AlertFlag\": z[0],\n        \"Reason Code1\": r1[0],\n        \"Reason Code2\": r2[0],\n        \"Reason Code3\": r3[0],\n    }\n    yield out\n\n\ndef get_shap_reasons(\n    model,\n    df_test,\n    referral_df,\n    link,\n    features,\n    features1_dict,\n    features2_dict,\n    features3_dict,\n):\n    link = link\n    num_features = 3\n    claim_nos = referral_df[\"ClaimNumber\"].tolist()\n    test_referrals = df_test[df_test.ClaimNumber.isin(claim_nos)]\n    test_referrals.reset_index(drop=True, inplace=True)\n    features_arr = np.array(features)\n    df = pd.DataFrame()\n    columns_reasoncode = [\"Reason code {}\".format(i + 1) for i in range(num_features)]\n    columns_refdet = [\"ClaimNumber\"]\n    for claim in claim_nos:\n        claim_row = test_referrals[test_referrals.ClaimNumber == claim]\n        claim_index = claim_row.index[0]\n        referrals_data = test_referrals[features]\n        valid_sample = referrals_data.loc[claim_index, :]\n        explainer = shap.TreeExplainer(model)\n        shap_values = explainer.shap_values(valid_sample)\n\n        sorted_shap_idx = np.argsort(np.abs(shap_values))[::-1]\n        features_sorted_top = features_arr[sorted_shap_idx][:num_features]\n        features_list_sorted = features_sorted_top.tolist()\n        top_feature_names = []\n        shap_values_top = shap_values[sorted_shap_idx][:num_features]\n        text_feat = []\n\n        for feature in features:\n            if (feature.startswith(\"R\")) or (\n                feature in [\"APD\", \"CAL\", \"GL\", \"HO\", \"PAC\", \"PAL\", \"WC\"]\n            ):\n                text_feat.append(feature)\n\n        for i, feat in enumerate(features_list_sorted):\n            feature_value = valid_sample[sorted_shap_idx[i]]\n\n            if (feat in text_feat) and (feature_value > 0):\n                feat_translated = features2_dict[feat]\n                if shap_values_top[i] >= 0:\n                    feat_translated = \"(+) \" + feat_translated\n                else:\n                    feat_translated = \"(-) \" + feat_translated\n\n            elif (feat in text_feat) and (\n                (feature_value == 0) or (math.isnan(feature_value))\n            ):\n                feat_translated = features1_dict[feat]\n                if shap_values_top[i] >= 0:\n                    feat_translated = \"(+) \" + feat_translated\n                else:\n                    feat_translated = \"(-) \" + feat_translated\n\n            elif feat not in text_feat:\n                feat_translated = features3_dict[feat].format(feature_value)\n            top_feature_names.append(feat_translated)\n\n        df = pd.concat(\n            [df, pd.DataFrame([top_feature_names], columns=columns_reasoncode)], axis=0\n        )\n\n    df.reset_index(drop=True, inplace=True)\n    referral_df_copy = referral_df.copy()\n    referral_df_copy.reset_index(drop=True, inplace=True)\n    referral_df_copy = pd.concat([referral_df_copy[columns_refdet], df], axis=1)\n\n    return (\n        shap.force_plot(explainer.expected_value, shap_values, valid_sample, link=link),\n        referral_df_copy,\n    )\n","scoreFunction":"action","repositoryInfo":{"repositoryType":"GIT_REPO","repositoryRemote":"https://bitbucket.corp.qbe.com/scm/naoda/cd_optimizer_model.git","repositoryDirectory":"/tmp/model-manage-repos/master/b4cb7bfd-65e3-4ee7-8294-536088fd3733","repositoryBranch":"master","lastCommitId":"295ad4e3bf5d7bcc27be077a12dca1fc2a2a9c08","classicRepository":false},"primaryModelSource":true,"name":"cd_optimizer.py","initFunction":"begin","importedRepository":{"repositoryType":"GIT_REPO","repositoryRemote":"https://bitbucket.corp.qbe.com/scm/naoda/cd_optimizer_model.git","repositoryDirectory":"/tmp/model-manage-repos/master/b4cb7bfd-65e3-4ee7-8294-536088fd3733","repositoryBranch":"master","lastCommitId":"295ad4e3bf5d7bcc27be077a12dca1fc2a2a9c08","classicRepository":false},"assetType":"SOURCE_CODE","assetRole":"MODEL_SOURCE","assetId":"b3cf14d3-ae8a-37cb-89f1-fe5bbe30f5f9"},{"repositoryInfo":{"secure":false,"repositoryType":"S3_REPOSITORY","region":"default-region","port":9020,"host":"ecs.qbeai.com"},"name":"b4cb7bfd-65e3-4ee7-8294-536088fd3733/73a8ea4f-8f9e-4db3-8f3d-5f1823c94c25.","importedRepository":{"repositoryType":"GIT_REPO","repositoryRemote":"https://bitbucket.corp.qbe.com/scm/naoda/cd_optimizer_model.git","repositoryDirectory":"/tmp/model-manage-repos/master/b4cb7bfd-65e3-4ee7-8294-536088fd3733","repositoryBranch":"master","lastCommitId":"295ad4e3bf5d7bcc27be077a12dca1fc2a2a9c08","classicRepository":false},"filename":"Dockerfile","fileUrl":"http://ecs.qbeai.com:9020/moc-app-prod/b4cb7bfd-65e3-4ee7-8294-536088fd3733/73a8ea4f-8f9e-4db3-8f3d-5f1823c94c25.","fileSize":233,"fileFormat":"UNKNOWN","assetType":"EXTERNAL_FILE","assetRole":"UNKNOWN","assetId":"73a8ea4f-8f9e-4db3-8f3d-5f1823c94c25"},{"repositoryInfo":{"secure":false,"repositoryType":"S3_REPOSITORY","region":"default-region","port":9020,"host":"ecs.qbeai.com"},"name":"b4cb7bfd-65e3-4ee7-8294-536088fd3733/fdf69f9b-17e4-427e-866d-436c6c62d467.pickle","importedRepository":{"repositoryType":"GIT_REPO","repositoryRemote":"https://bitbucket.corp.qbe.com/scm/naoda/cd_optimizer_model.git","repositoryDirectory":"/tmp/model-manage-repos/master/b4cb7bfd-65e3-4ee7-8294-536088fd3733","repositoryBranch":"master","lastCommitId":"295ad4e3bf5d7bcc27be077a12dca1fc2a2a9c08","classicRepository":false},"filename":"feature_num.pickle","fileUrl":"http://ecs.qbeai.com:9020/moc-app-prod/b4cb7bfd-65e3-4ee7-8294-536088fd3733/fdf69f9b-17e4-427e-866d-436c6c62d467.pickle","fileSize":97,"fileFormat":"UNKNOWN","assetType":"EXTERNAL_FILE","assetRole":"WEIGHTS_FILE","assetId":"fdf69f9b-17e4-427e-866d-436c6c62d467"},{"repositoryInfo":{"secure":false,"repositoryType":"S3_REPOSITORY","region":"default-region","port":9020,"host":"ecs.qbeai.com"},"name":"b4cb7bfd-65e3-4ee7-8294-536088fd3733/e0cfe46c-961d-4e64-99ed-9404377a8d35.txt","importedRepository":{"repositoryType":"GIT_REPO","repositoryRemote":"https://bitbucket.corp.qbe.com/scm/naoda/cd_optimizer_model.git","repositoryDirectory":"/tmp/model-manage-repos/master/b4cb7bfd-65e3-4ee7-8294-536088fd3733","repositoryBranch":"master","lastCommitId":"295ad4e3bf5d7bcc27be077a12dca1fc2a2a9c08","classicRepository":false},"filename":"requirements.txt","fileUrl":"http://ecs.qbeai.com:9020/moc-app-prod/b4cb7bfd-65e3-4ee7-8294-536088fd3733/e0cfe46c-961d-4e64-99ed-9404377a8d35.txt","fileSize":539,"fileFormat":"UNKNOWN","assetType":"EXTERNAL_FILE","assetRole":"UNKNOWN","assetId":"e0cfe46c-961d-4e64-99ed-9404377a8d35"},{"repositoryInfo":{"secure":false,"repositoryType":"S3_REPOSITORY","region":"default-region","port":9020,"host":"ecs.qbeai.com"},"name":"b4cb7bfd-65e3-4ee7-8294-536088fd3733/8b409398-3873-4598-abdc-305df03196ea.pklz","importedRepository":{"repositoryType":"GIT_REPO","repositoryRemote":"https://bitbucket.corp.qbe.com/scm/naoda/cd_optimizer_model.git","repositoryDirectory":"/tmp/model-manage-repos/master/b4cb7bfd-65e3-4ee7-8294-536088fd3733","repositoryBranch":"master","lastCommitId":"295ad4e3bf5d7bcc27be077a12dca1fc2a2a9c08","classicRepository":false},"filename":"vec_Oct23.pklz","fileUrl":"http://ecs.qbeai.com:9020/moc-app-prod/b4cb7bfd-65e3-4ee7-8294-536088fd3733/8b409398-3873-4598-abdc-305df03196ea.pklz","fileSize":14552,"fileFormat":"UNKNOWN","assetType":"EXTERNAL_FILE","assetRole":"WEIGHTS_FILE","assetId":"8b409398-3873-4598-abdc-305df03196ea"},{"repositoryInfo":{"secure":false,"repositoryType":"S3_REPOSITORY","region":"default-region","port":9020,"host":"ecs.qbeai.com"},"name":"b4cb7bfd-65e3-4ee7-8294-536088fd3733/935389b2-2a92-4b16-8502-a5a87a347b1e.csv","importedRepository":{"repositoryType":"GIT_REPO","repositoryRemote":"https://bitbucket.corp.qbe.com/scm/naoda/cd_optimizer_model.git","repositoryDirectory":"/tmp/model-manage-repos/master/b4cb7bfd-65e3-4ee7-8294-536088fd3733","repositoryBranch":"master","lastCommitId":"295ad4e3bf5d7bcc27be077a12dca1fc2a2a9c08","classicRepository":false},"filename":"vec_df.csv","fileUrl":"http://ecs.qbeai.com:9020/moc-app-prod/b4cb7bfd-65e3-4ee7-8294-536088fd3733/935389b2-2a92-4b16-8502-a5a87a347b1e.csv","fileSize":270973,"fileFormat":"CSV","assetType":"EXTERNAL_FILE","assetRole":"TEST_DATA","assetId":"935389b2-2a92-4b16-8502-a5a87a347b1e"},{"repositoryInfo":{"secure":false,"repositoryType":"S3_REPOSITORY","region":"default-region","port":9020,"host":"ecs.qbeai.com"},"name":"b4cb7bfd-65e3-4ee7-8294-536088fd3733/efa4c763-c30d-4733-840d-0b356d699d99.csv","importedRepository":{"repositoryType":"GIT_REPO","repositoryRemote":"https://bitbucket.corp.qbe.com/scm/naoda/cd_optimizer_model.git","repositoryDirectory":"/tmp/model-manage-repos/master/b4cb7bfd-65e3-4ee7-8294-536088fd3733","repositoryBranch":"master","lastCommitId":"295ad4e3bf5d7bcc27be077a12dca1fc2a2a9c08","classicRepository":false},"filename":"col_names_Oct23.csv","fileUrl":"http://ecs.qbeai.com:9020/moc-app-prod/b4cb7bfd-65e3-4ee7-8294-536088fd3733/efa4c763-c30d-4733-840d-0b356d699d99.csv","fileSize":6165,"fileFormat":"CSV","assetType":"EXTERNAL_FILE","assetRole":"TEST_DATA","assetId":"efa4c763-c30d-4733-840d-0b356d699d99"},{"repositoryInfo":{"secure":false,"repositoryType":"S3_REPOSITORY","region":"default-region","port":9020,"host":"ecs.qbeai.com"},"name":"b4cb7bfd-65e3-4ee7-8294-536088fd3733/56de25e5-0d84-4088-b6ea-de472f3d5fd0.pickle","importedRepository":{"repositoryType":"GIT_REPO","repositoryRemote":"https://bitbucket.corp.qbe.com/scm/naoda/cd_optimizer_model.git","repositoryDirectory":"/tmp/model-manage-repos/master/b4cb7bfd-65e3-4ee7-8294-536088fd3733","repositoryBranch":"master","lastCommitId":"295ad4e3bf5d7bcc27be077a12dca1fc2a2a9c08","classicRepository":false},"filename":"feature_cat_trans_missing.pickle","fileUrl":"http://ecs.qbeai.com:9020/moc-app-prod/b4cb7bfd-65e3-4ee7-8294-536088fd3733/56de25e5-0d84-4088-b6ea-de472f3d5fd0.pickle","fileSize":53480,"fileFormat":"UNKNOWN","assetType":"EXTERNAL_FILE","assetRole":"WEIGHTS_FILE","assetId":"56de25e5-0d84-4088-b6ea-de472f3d5fd0"},{"repositoryInfo":{"secure":false,"repositoryType":"S3_REPOSITORY","region":"default-region","port":9020,"host":"ecs.qbeai.com"},"name":"b4cb7bfd-65e3-4ee7-8294-536088fd3733/956f5729-d945-455c-860a-6d4e7d86055f.pklz","importedRepository":{"repositoryType":"GIT_REPO","repositoryRemote":"https://bitbucket.corp.qbe.com/scm/naoda/cd_optimizer_model.git","repositoryDirectory":"/tmp/model-manage-repos/master/b4cb7bfd-65e3-4ee7-8294-536088fd3733","repositoryBranch":"master","lastCommitId":"295ad4e3bf5d7bcc27be077a12dca1fc2a2a9c08","classicRepository":false},"filename":"model_Oct23.pklz","fileUrl":"http://ecs.qbeai.com:9020/moc-app-prod/b4cb7bfd-65e3-4ee7-8294-536088fd3733/956f5729-d945-455c-860a-6d4e7d86055f.pklz","fileSize":5343917,"fileFormat":"UNKNOWN","assetType":"EXTERNAL_FILE","assetRole":"WEIGHTS_FILE","assetId":"956f5729-d945-455c-860a-6d4e7d86055f"},{"repositoryInfo":{"secure":false,"repositoryType":"S3_REPOSITORY","region":"default-region","port":9020,"host":"ecs.qbeai.com"},"name":"b4cb7bfd-65e3-4ee7-8294-536088fd3733/95a722f3-707a-4e86-9e09-aff39ff56871.pickle","importedRepository":{"repositoryType":"GIT_REPO","repositoryRemote":"https://bitbucket.corp.qbe.com/scm/naoda/cd_optimizer_model.git","repositoryDirectory":"/tmp/model-manage-repos/master/b4cb7bfd-65e3-4ee7-8294-536088fd3733","repositoryBranch":"master","lastCommitId":"295ad4e3bf5d7bcc27be077a12dca1fc2a2a9c08","classicRepository":false},"filename":"feature_cat_trans_exist.pickle","fileUrl":"http://ecs.qbeai.com:9020/moc-app-prod/b4cb7bfd-65e3-4ee7-8294-536088fd3733/95a722f3-707a-4e86-9e09-aff39ff56871.pickle","fileSize":38515,"fileFormat":"UNKNOWN","assetType":"EXTERNAL_FILE","assetRole":"WEIGHTS_FILE","assetId":"95a722f3-707a-4e86-9e09-aff39ff56871"},{"repositoryInfo":{"secure":false,"repositoryType":"S3_REPOSITORY","region":"default-region","port":9020,"host":"ecs.qbeai.com"},"name":"b4cb7bfd-65e3-4ee7-8294-536088fd3733/be06bd06-9004-47ea-b189-4c5dcd86feb3.md","importedRepository":{"repositoryType":"GIT_REPO","repositoryRemote":"https://bitbucket.corp.qbe.com/scm/naoda/cd_optimizer_model.git","repositoryDirectory":"/tmp/model-manage-repos/master/b4cb7bfd-65e3-4ee7-8294-536088fd3733","repositoryBranch":"master","lastCommitId":"295ad4e3bf5d7bcc27be077a12dca1fc2a2a9c08","classicRepository":false},"filename":"README.md","fileUrl":"http://ecs.qbeai.com:9020/moc-app-prod/b4cb7bfd-65e3-4ee7-8294-536088fd3733/be06bd06-9004-47ea-b189-4c5dcd86feb3.md","fileSize":210,"fileFormat":"UNKNOWN","assetType":"EXTERNAL_FILE","assetRole":"README_FILE","assetId":"be06bd06-9004-47ea-b189-4c5dcd86feb3"}],"lastModifiedDate":"2021-03-11T02:53:13.711Z","lastModifiedBy":"SYSTEM","id":"b4cb7bfd-65e3-4ee7-8294-536088fd3733","group":"modelop","gitDifferences":[],"createdDate":"2021-03-11T02:53:13.711Z","createdBy":"SYSTEM","associatedModels":[]},"modelMLCs":[],"modelDocuments":[],"metaData":{"tags":[],"name":"cd_optimizer_model-20210310_2053","custom":{}},"lastModifiedDate":"2021-03-11T02:53:58.163Z","lastModifiedBy":"SYSTEM","id":"7cfc4bbd-b3ed-4e62-9b88-8cff05692fed","group":"modelop","createdDate":"2021-03-11T02:53:57.572Z","createdBy":"SYSTEM","associatedModels":[]},"lastModifiedDate":"2021-03-11T02:54:52.145Z","jobWaitTime":1615473645393,"jobType":"MODEL_BATCH_JOB","jobStatus":"ERROR","jobRunTime":1615473645394,"jobMessages":["2021/3/11 14:40:45 batch job received","2021/3/11 14:40:45 loading batch job","2021/3/11 14:40:45 [info] Data processing function for slot 0: action","2021/3/11 14:40:45 [info] Data processing function for slot 1: action","2021/3/11 14:40:45 [info] input data list length:  1","2021/3/11 14:40:45 [info] input slots list length: 1","2021/3/11 14:40:45 [info] output data list length:  1","2021/3/11 14:40:45 [info] output slots list length: 1","2021/3/11 14:40:45 [info] attach_stream <<\"007\">> 1 <<\"temp_model_output.json\">>","2021/3/11 14:40:45 [info] attach_stream <<\"007\">> 0 <<\"temp_model_input.json\">>","2021/3/11 14:40:45 [info] closing file: <<\"/tmp/playground/batch-057f0de8-a43e-474d-8682-bb9fd0b1ddff/temp_model_output.json\">>","2021/3/11 14:40:45 [info] sensor activated: manifold.1.records.count [<0.203.0>]","2021/3/11 14:40:45 [info] sensor activated: manifold.1.records.size [<0.204.0>]","2021/3/11 14:40:45 [info] sensor activated: manifold.1.records.rejected.by.encoding [<0.206.0>]","2021/3/11 14:40:45 [info] sensor activated: manifold.1.records.rejected.by.schema [<0.205.0>]","2021/3/11 14:40:45 [info] materialize external file asset","2021/3/11 14:40:45 [info] fetching file \"temp_model_input.json\" from \"http://ecs.qbeai.com:9020/moc-app-prod/b4cb7bfd-65e3-4ee7-8294-536088fd3733/c3399ee0-6720-4afc-b419-99ec5feae75b.json\" and placing it here: <<\"/tmp/playground/batch-007\">>","2021/3/11 14:40:45 [warning] extra fields found in s3 external file asset repositoryInfo: #{<<\"host\">> => <<\"ecs.qbeai.com\">>,<<\"port\">> => 9020}","2021/3/11 14:40:45 [info] fetch of file \"temp_model_input.json\" from \"http://ecs.qbeai.com:9020/moc-app-prod/b4cb7bfd-65e3-4ee7-8294-536088fd3733/c3399ee0-6720-4afc-b419-99ec5feae75b.json\" complete: ok","2021/3/11 14:40:45 [info] Batch 007 has been fully loaded","2021/3/11 14:40:45 [info] Batch 007 loaded..","2021/3/11 14:40:45 [info] sensor activated: manifold.0.records.count [<0.198.0>]","2021/3/11 14:40:45 [info] sensor activated: manifold.0.records.size [<0.199.0>]","2021/3/11 14:40:45 [info] sensor activated: manifold.0.records.rejected.by.encoding [<0.201.0>]","2021/3/11 14:40:45 [info] sensor activated: manifold.0.records.rejected.by.schema [<0.200.0>]","2021/3/11 14:40:45 [info] Directory, /tmp/playground/66003533/outputDir, successfully created","2021/3/11 14:40:45 [info] fetching file \"Dockerfile\" from \"http://ecs.qbeai.com:9020/moc-app-prod/b4cb7bfd-65e3-4ee7-8294-536088fd3733/73a8ea4f-8f9e-4db3-8f3d-5f1823c94c25.\" and placing it here: \"/tmp/playground/66003533\"","2021/3/11 14:40:45 [info] get_credentials for: <<\"ecs.qbeai.com:9020/moc-app-prod/b4cb7bfd-65e3-4ee7-8294-536088fd3733/73a8ea4f-8f9e-4db3-8f3d-5f1823c94c25.\">>","2021/3/11 14:40:45 [info] credentials found with path: <<>>","2021/3/11 14:40:45 [error] S3 stream initialization failed: S3 error: <Error><Code>InvalidAccessKeyId</Code><Message>The Access Key Id you provided does not exist in our records.</Message><RequestId>ac1500da:173bca1c27a:d7380:47</RequestId></Error>","2021/3/11 14:40:45 [error] unable to open s3 stream: {error,{s3_error,403,<<\"<Error><Code>InvalidAccessKeyId</Code><Message>The Access Key Id you provided does not exist in our records.</Message><RequestId>ac1500da:173bca1c27a:d7380:47</RequestId></Error>\">>}}","2021/3/11 14:40:45 [info] fetch of file \"Dockerfile\" from \"http://ecs.qbeai.com:9020/moc-app-prod/b4cb7bfd-65e3-4ee7-8294-536088fd3733/73a8ea4f-8f9e-4db3-8f3d-5f1823c94c25.\" complete: {error,\"unable to open s3 stream\"}","2021/3/11 14:40:45 [error] failed to extract external file asset: \"unable to open s3 stream\"","2021/3/11 14:40:45 [info] Unable to start jet: {{badmatch,{error,\"unable to open s3 stream\"}},[{jet,init,7,[{file,\"/_/src/jet.erl\"},{line,96}]},{proc_lib,init_p_do_apply,3,[{file,\"proc_lib.erl\"},{line,249}]}]}","2021/3/11 14:40:45 [info] closing file: <<\"/tmp/playground/batch-007/temp_model_input.json\">>","2021/3/11 14:40:45 [info] closing file: <<\"/tmp/playground/batch-007/temp_model_output.json\">>","2021/3/11 14:40:45 batch job failed due to engine reset"],"jobEndTime":1615473645955,"inputData":[{"repositoryInfo":{"secure":false,"secretKey":"Vyux8iWVb2wrzsRxhneCrLRhK0oOJBiYPQTkwh7j","repositoryType":"S3_REPOSITORY","region":"default-region","port":9020,"host":"ecs.qbeai.com","accessKey":"modelop-rp-prod"},"name":"b4cb7bfd-65e3-4ee7-8294-536088fd3733/c3399ee0-6720-4afc-b419-99ec5feae75b.json","filename":"temp_model_input.json","fileUrl":"http://ecs.qbeai.com:9020/moc-app-prod/b4cb7bfd-65e3-4ee7-8294-536088fd3733/c3399ee0-6720-4afc-b419-99ec5feae75b.json","fileSize":6360,"fileFormat":"JSON","assetType":"EXTERNAL_FILE","assetRole":"TEST_DATA","assetId":"c3399ee0-6720-4afc-b419-99ec5feae75b"}],"id":"007","group":"modelop","createdDate":"2021-03-11T02:54:49.921Z","createdBy":"SYSTEM"}
